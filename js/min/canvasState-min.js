function randomColor(){var t=Math.floor(255*Math.random()),e=Math.floor(255*Math.random()),n=Math.floor(255*Math.random());return"rgb("+t+","+e+","+n+")"}function CanvasState(t){this.canvas=document.getElementById("canvas"),t.height=window.innerHeight,t.width=window.innerWidth,t.style.width="45%",t.style.height="90%",this.ctx=ctx,this.shapes=[],this.fallen=[new Rectangle(0,t.height,t.width,tHeight)],this.clear=function(){ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.fallen.length;t++)this.fallen[t].color="purple",this.fallen[t].draw(ctx)},this.keyControls=function(t){document.onkeydown=function(e){switch(window.console.log(this.shapes),e=e||window.event,e.which||e.keyCode){case 65:window.console.log("left"),t.moveLeft();break;case 37:window.console.log("left"),t.moveLeft();break;case 87:window.console.log("Up");break;case 38:window.console.log("Up");break;case 68:window.console.log("Right"),t.moveRight();break;case 39:window.console.log("Reft"),t.moveRight();break;case 82:window.console.log("Down"),t.y+=tHeight;break;case 40:window.console.log("Down"),t.y+=tHeight;break;default:window.console.log(e.which),window.console.log(e.keyCode)}}};var e=this;e.interval=33,setInterval(function(){e.draw()},e.interval)}var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),tWidth=window.innerWidth/10.1,tHeight=window.innerHeight/20.9,Rectangle=function(t,e,n,o){this.x=t,this.y=e,this.w=n,this.h=o,this.hit=!1,(void 0===e||void 0===n||void 0===o)&&(this.y=0,this.w=tWidth,this.h=tHeight),this.color=randomColor()};Rectangle.prototype.draw=function(){ctx.fillStyle=this.color,ctx.fillRect(this.x,this.y,this.w,this.h)},Rectangle.prototype.moveRight=function(){return this.x+=tWidth},Rectangle.prototype.moveLeft=function(){return this.x-=tWidth},Rectangle.prototype.drop=function(){this.y+=tHeight/10},Rectangle.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h?!0:!1},Rectangle.prototype.intersects=function(t){return this.contains(t.x,t.y)||this.contains(t.x+t.w,t.y)||this.contains(t.x,t.y+t.h)||this.contains(t.x+t.w,t.y+t.h)?!0:t.contains(this.x,this.y)||t.contains(this.x+this.w,this.y)||t.contains(this.x,this.y+this.h)||t.contains(this.x+this.w,this.y+this.h)?!0:!1};var movement=tHeight/10;CanvasState.prototype.addShape=function(t){this.shapes.push(t)},CanvasState.prototype.draw=function(){var t=this.shapes,e=this.fallen;this.clear();for(var n=0;n<t.length;n++)for(var o=e.length-1;o>=0;o--)t[n].intersects(e[o])?(t[n].y=e[o].y-e[o].h,e.push(t[n]),t.splice(0,1)):(t[n].drop(),window.console.log(movement/10),this.keyControls(this.shapes[0]),t[n].draw(ctx))};var counter=-1;CanvasState.prototype.newRect=function(){window.console.log("Alive!"),9>counter?counter++:counter=0;var t=window.innerWidth;this.addShape(new Rectangle(t*(counter/10)))};