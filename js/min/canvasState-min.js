function randomColor(){var t=Math.floor(255*Math.random()),n=Math.floor(255*Math.random()),i=Math.floor(255*Math.random());return"rgb("+t+","+n+","+i+")"}function CanvasState(t){this.canvas=document.getElementById("canvas"),t.height=window.innerHeight,t.width=window.innerWidth,this.canvas.style.width="41.7%",this.canvas.style.height="90%",this.ctx=ctx,this.shapes=[],this.fallen=[new Rectangle(0,t.height-10,t.width,20)],this.clear=function(){ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.fallen.length;t++)this.fallen[t].draw(ctx)};var n=this;this.interval=33,setInterval(function(){n.draw()},n.interval)}var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),Rectangle=function(t,n,i,e){this.x=t,this.y=n,this.w=i,this.h=e,this.hit=!1,(void 0===i||void 0===e)&&(this.w=window.innerWidth/10,this.h=window.innerHeight/24),this.color=randomColor()};Rectangle.prototype.draw=function(){ctx.fillStyle=this.color,ctx.fillRect(this.x,this.y,this.w,this.h)},Rectangle.prototype.contains=function(t,n){return t>=this.x&&t<=this.x+this.w&&n>=this.y&&n<=this.y+this.h?!0:!1},Rectangle.prototype.moveRight=function(){return this.x+=40},Rectangle.prototype.moveLeft=function(){return this.x-=40},Rectangle.prototype.intersects=function(t){return this.contains(t.x,t.y)||this.contains(t.x+t.w,t.y)||this.contains(t.x,t.y+t.h)||this.contains(t.x+t.w,t.y+t.h)?!0:t.contains(this.x,this.y)||t.contains(this.x+this.w,this.y)||t.contains(this.x,this.y+this.h)||t.contains(this.x+this.w,this.y+this.h)?!0:!1},CanvasState.prototype.addShape=function(t){this.shapes.push(t),this.valid=!1},CanvasState.prototype.draw=function(){var t=this.shapes,n=this.fallen;this.clear();for(var i=0;i<t.length;i++)for(var e=3,h=n.length-1;h>=0;h--)n[h].draw(ctx),t[i].intersects(n[h])?(t[i].y=n[h].y-n[h].h,n.push(t[i]),t.splice(0,1),window.console.log("fallen: "+n),window.console.log("shapes: "+t),this.hit=!0):t[i].hit!==!0&&(t[i].y+=e,document.onkeydown=function(n){switch(n=n||window.event,n.which||n.keyCode){case 37:t[0].moveLeft();break;case 39:t[0].moveRight();break;default:window.console.log(n.which),window.console.log(n.keyCode)}},t[i].draw(ctx))};var counter=-1;CanvasState.prototype.newRect=function(){window.console.log("Alive!"),9>counter?counter++:counter=0;var t=window.innerWidth,n=window.innerWidth/24;this.addShape(new Rectangle(t*(counter/10),n))};