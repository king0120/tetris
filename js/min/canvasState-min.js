function randomColor(){var t=Math.floor(255*Math.random()),e=Math.floor(255*Math.random()),i=Math.floor(255*Math.random());return"rgb("+t+","+e+","+i+")"}function randomColor(){var t=Math.floor(255*Math.random()),e=Math.floor(255*Math.random()),i=Math.floor(255*Math.random());return"rgb("+t+","+e+","+i+")"}function CanvasState(t){this.canvas=document.getElementById("canvas"),t.height=window.innerHeight,t.width=window.innerWidth,t.style.width="45%",t.style.height="90%",this.ctx=ctx,this.shapes=[],this.fallen=[new Rectangle(0,t.height,"black",t.width,tHeight)],this.clear=function(){ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.fallen[0].draw(ctx);for(var t=0;t<this.fallen.length;t++)this.fallen[t].color="purple",this.fallen[t].draw(ctx)};var e=function(t){console.log(t);for(var e=0;e<t.length;e++)t[e].x-=tWidth},i=function(t){console.log(t);for(var e=0;e<t.length;e++)t[e].x+=tWidth};this.keyControls=function(t){document.onkeydown=function(n){switch(n=n||window.event,n.which||n.keyCode){case 65:window.console.log("left"),e(t);break;case 37:window.console.log("left"),e(t);break;case 87:window.console.log("Up");break;case 38:window.console.log("Up");break;case 68:window.console.log("Right"),i(t);break;case 39:window.console.log("Right"),window.console.log("tWidth "+tWidth),i(t);break;case 82:window.console.log("Down");break;case 40:window.console.log("Down");break;default:window.console.log(n.which),window.console.log(n.keyCode)}}};var n=this;n.interval=33;var o=setInterval(function(){n.draw()},n.interval)}function randomTetrino(){var t=Math.floor(7*Math.random());switch(!0){case 0===t:return tBlock.shape;case 1===t:return jBlock.shape;case 2===t:return sBlock.shape;case 3===t:return iBlock.shape;case 4===t:return oBlock.shape;case 5===t:return zBlock.shape;case 6===t:return lBlock.shape}}var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),tWidth=(window.innerWidth-1)/10,tHeight=(window.innerHeight-1)/20,Rectangle=function(t,e,i,n,o){this.x=t,this.y=e,this.w=n,this.h=o,this.hit=!1,(void 0===n||void 0===o)&&(this.w=tWidth,this.h=tHeight),this.color=i};Rectangle.prototype.draw=function(){ctx.fillStyle=this.color,ctx.fillRect(this.x,this.y,this.w,this.h)},Rectangle.prototype.drop=function(){this.y+=tHeight/5},Rectangle.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h?!0:!1},Rectangle.prototype.intersects=function(t){return this.contains(t.x,t.y)||this.contains(t.x+t.w,t.y)||this.contains(t.x,t.y+t.h)||this.contains(t.x+t.w,t.y+t.h)?!0:t.contains(this.x,this.y)||t.contains(this.x+this.w,this.y)||t.contains(this.x,this.y+this.h)||t.contains(this.x+this.w,this.y+this.h)?!0:!1};var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),tWidth=(window.innerWidth-1)/10,tHeight=(window.innerHeight-1)/20,Rectangle=function(t,e,i,n,o){this.x=t,this.y=e,this.w=n,this.h=o,this.hit=!1,(void 0===n||void 0===o)&&(this.w=tWidth,this.h=tHeight),this.color=i};Rectangle.prototype.draw=function(){ctx.fillStyle=this.color,ctx.fillRect(this.x,this.y,this.w,this.h)},Rectangle.prototype.drop=function(){this.y+=tHeight/5},Rectangle.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h?!0:!1},Rectangle.prototype.intersects=function(t){return this.contains(t.x,t.y)||this.contains(t.x+t.w,t.y)||this.contains(t.x,t.y+t.h)||this.contains(t.x+t.w,t.y+t.h)?!0:t.contains(this.x,this.y)||t.contains(this.x+this.w,this.y)||t.contains(this.x,this.y+this.h)||t.contains(this.x+this.w,this.y+this.h)?!0:!1};var positionX=window.innerWidth,tBlock={color:"#9013FE",shape:[new Rectangle(.4*positionX,tHeight,"#9013FE"),new Rectangle(.3*positionX,2*tHeight,"#9013FE"),new Rectangle(.4*positionX,2*tHeight,"#9013FE"),new Rectangle(.5*positionX,2*tHeight,"#9013FE")]},jBlock={color:"#4A6EE2",shape:[new Rectangle(.5*positionX,tHeight,"#4A6EE2"),new Rectangle(.3*positionX,2*tHeight,"#4A6EE2"),new Rectangle(.4*positionX,2*tHeight,"#4A6EE2"),new Rectangle(.5*positionX,2*tHeight,"#4A6EE2")]},sBlock={color:"#7ED321",shape:[new Rectangle(.4*positionX,tHeight,"#7ED321"),new Rectangle(.4*positionX,2*tHeight,"#7ED321"),new Rectangle(.3*positionX,tHeight,"#7ED321"),new Rectangle(.5*positionX,2*tHeight,"#7ED321")]},iBlock={color:"#50E3C2",shape:[new Rectangle(.4*positionX,tHeight,"#50E3C2"),new Rectangle(.6*positionX,tHeight,"#50E3C2"),new Rectangle(.3*positionX,tHeight,"#50E3C2"),new Rectangle(.5*positionX,tHeight,"#50E3C2")]},oBlock={color:"#F8E71C",shape:[new Rectangle(.4*positionX,tHeight,"#F8E71C"),new Rectangle(.5*positionX,tHeight,"#F8E71C"),new Rectangle(.4*positionX,2*tHeight,"#F8E71C"),new Rectangle(.5*positionX,2*tHeight,"#F8E71C")]},zBlock={color:"#D0021B",shape:[new Rectangle(.4*positionX,tHeight,"#D0021B"),new Rectangle(.3*positionX,2*tHeight,"#D0021B"),new Rectangle(.4*positionX,2*tHeight,"#D0021B"),new Rectangle(.5*positionX,tHeight,"#D0021B")]},lBlock={color:"#E59512",shape:[new Rectangle(.3*positionX,tHeight,"#E59512"),new Rectangle(.3*positionX,2*tHeight,"#E59512"),new Rectangle(.4*positionX,2*tHeight,"#E59512"),new Rectangle(.5*positionX,2*tHeight,"#E59512")]};CanvasState.prototype.addShape=function(t){this.shapes.push(t)},CanvasState.prototype.draw=function(){var t=this.shapes,e=this.fallen;if(this.clear(),t.length>0)for(var i=0;i<t.length;i++)for(var n=e.length-1;n>=0;n--)t[i].intersects(e[n])?(t[i].y=e[n].y-e[n].h,e.push(t[0]),e.push(t[1]),e.push(t[2]),e.push(t[3]),t.splice(0,4),clear(intervals),tBlock.shape=[new Rectangle(.4*positionX,tHeight,"#9013FE"),new Rectangle(.3*positionX,2*tHeight,"#9013FE"),new Rectangle(.4*positionX,2*tHeight,"#9013FE"),new Rectangle(.5*positionX,2*tHeight,"#9013FE")],jBlock.shape=[new Rectangle(.5*positionX,tHeight,"#4A6EE2"),new Rectangle(.3*positionX,2*tHeight,"#4A6EE2"),new Rectangle(.4*positionX,2*tHeight,"#4A6EE2"),new Rectangle(.5*positionX,2*tHeight,"#4A6EE2")],sBlock.shape=[new Rectangle(.4*positionX,tHeight,"#7ED321"),new Rectangle(.4*positionX,2*tHeight,"#7ED321"),new Rectangle(.3*positionX,tHeight,"#7ED321"),new Rectangle(.5*positionX,2*tHeight,"#7ED321")],iBlock.shape=[new Rectangle(.4*positionX,tHeight,"#50E3C2"),new Rectangle(.6*positionX,tHeight,"#50E3C2"),new Rectangle(.3*positionX,tHeight,"#50E3C2"),new Rectangle(.5*positionX,tHeight,"#50E3C2")],oBlock.shape=[new Rectangle(.4*positionX,tHeight,"#F8E71C"),new Rectangle(.5*positionX,tHeight,"#F8E71C"),new Rectangle(.4*positionX,2*tHeight,"#F8E71C"),new Rectangle(.5*positionX,2*tHeight,"#F8E71C")],zBlock.shape=[new Rectangle(.4*positionX,tHeight,"#D0021B"),new Rectangle(.3*positionX,2*tHeight,"#D0021B"),new Rectangle(.4*positionX,2*tHeight,"#D0021B"),new Rectangle(.5*positionX,tHeight,"#D0021B")],lBlock.shape=[new Rectangle(.3*positionX,tHeight,"#E59512"),new Rectangle(.3*positionX,2*tHeight,"#E59512"),new Rectangle(.4*positionX,2*tHeight,"#E59512"),new Rectangle(.5*positionX,2*tHeight,"#E59512")]):(t[i].drop(),this.keyControls(t),t[i].draw(ctx))},CanvasState.prototype.newRect=function(){for(var t=randomTetrino(),e=0;e<t.length;e++)this.addShape(t[e])};